<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíä Recordatorios - Suplemento y Parche</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="manifest" href="assets/js/manifest.json">
</head>
<body>
    <div class="container">
        <header>
            <h1>üíä Tus Recordatorios Diarios</h1>
            <p class="subtitle">Suplemento cada 3h ¬∑ Parche solo a las 9pm ü™ù</p>
        </header>

        <!-- Estado -->
        <div class="status-card">
            <div class="status-header">
                <span class="status-indicator" id="statusIndicator"></span>
                <span id="statusText">No suscrito</span>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">üíä Suplemento hoy:</span>
                    <span class="stat-value" id="suplementoCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ü™ù Parche hoy:</span>
                    <span class="stat-value" id="parcheCount">0</span>
                </div>
            </div>
        </div>

        <!-- Botones -->
        <div class="actions">
            <button id="subscribeBtn" onclick="suscribir()" class="btn btn-primary">
                üîî Activar recordatorios
            </button>
            <button id="unsubscribeBtn" onclick="desuscribir()" class="btn btn-secondary" style="display: none;">
                üîï Desactivar
            </button>
            <button onclick="enviarPrueba()" class="btn btn-outline">
                üß™ Enviar prueba
            </button>
        </div>

        <!-- Recordatorios -->
        <div class="notificaciones-section">
            <h2>üéØ Tus recordatorios</h2>
            <div id="notificacionesContainer"></div>
        </div>

        <!-- Pr√≥ximas -->
        <div class="proximas-section">
            <h3>‚è∞ Pr√≥ximos recordatorios</h3>
            <div id="proximasContainer"></div>
        </div>

        <!-- No Molestar -->
        <div class="dnd-section" id="dndControls"></div>

        <!-- Historial -->
        <div class="historial-section">
            <h3>üìã Historial de hoy</h3>
            <div id="historialContainer" class="historial-list"></div>
        </div>

        <!-- Info -->
        <div class="info-box">
            <h4>üìå Resumen:</h4>
            <ul>
                <li>üíä <strong>Suplemento:</strong> 12pm, 3pm, 6pm, 9pm</li>
                <li>ü™ù <strong>Parche:</strong> 9pm (una vez al d√≠a)</li>
                <li>üîï <strong>No molestar:</strong> Silencia todo hasta ma√±ana</li>
                <li>‚ûï <strong>Personalizados:</strong> Crea tus propios recordatorios</li>
            </ul>
        </div>
    </div>

    <!-- Bot√≥n flotante -->
    <button class="fab" onclick="abrirModal()" title="Nuevo recordatorio">
        <span class="fab-icon">Ôºã</span>
    </button>

    <!-- Overlay -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- Modal nueva notificaci√≥n -->
    <div class="modal" id="modalNueva">
        <div class="modal-header">
            <h3>‚ûï Nuevo recordatorio</h3>
            <button class="modal-close" onclick="cerrarModal()">‚úï</button>
        </div>
        <form id="formNueva" onsubmit="event.preventDefault()">
            <div class="form-group">
                <label>Emoji / Icono</label>
                <input type="text" id="nuevoIcono" placeholder="üîî" maxlength="2" class="form-input input-emoji">
            </div>
            <div class="form-group">
                <label>T√≠tulo <span class="required">*</span></label>
                <input type="text" id="nuevaTitulo" placeholder="Ej: Beber agua" class="form-input" required>
            </div>
            <div class="form-group">
                <label>Mensaje <span class="required">*</span></label>
                <textarea id="nuevaMensaje" placeholder="Ej: ¬°Recuerda hidratarte!" class="form-input form-textarea" required></textarea>
            </div>
            <div class="form-group">
                <label>Tipo de repetici√≥n</label>
                <select id="tipoRepeticion" class="form-input form-select">
                    <option value="diario">üìÜ Diario (a una hora fija)</option>
                    <option value="periodico">üîÑ Peri√≥dico (cada X horas)</option>
                    <option value="unica">1Ô∏è‚É£ Una sola vez</option>
                </select>
            </div>

            <!-- Opciones hora √∫nica / diario -->
            <div id="opcionesHora" class="form-group">
                <label>Hora</label>
                <select id="horaUnica" class="form-input form-select">
                    <option value="6">6:00 AM</option>
                    <option value="7">7:00 AM</option>
                    <option value="8">8:00 AM</option>
                    <option value="9" selected>9:00 AM</option>
                    <option value="10">10:00 AM</option>
                    <option value="11">11:00 AM</option>
                    <option value="12">12:00 PM</option>
                    <option value="13">1:00 PM</option>
                    <option value="14">2:00 PM</option>
                    <option value="15">3:00 PM</option>
                    <option value="16">4:00 PM</option>
                    <option value="17">5:00 PM</option>
                    <option value="18">6:00 PM</option>
                    <option value="19">7:00 PM</option>
                    <option value="20">8:00 PM</option>
                    <option value="21">9:00 PM</option>
                    <option value="22">10:00 PM</option>
                </select>
            </div>

            <!-- Opciones peri√≥dico -->
            <div id="opcionesPeriodico" class="form-row" style="display:none">
                <div class="form-group">
                    <label>Hora inicio</label>
                    <select id="horaInicioPeriodico" class="form-input form-select">
                        <option value="6">6:00 AM</option>
                        <option value="7">7:00 AM</option>
                        <option value="8" selected>8:00 AM</option>
                        <option value="9">9:00 AM</option>
                        <option value="10">10:00 AM</option>
                        <option value="12">12:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Hora fin</label>
                    <select id="horaFinPeriodico" class="form-input form-select">
                        <option value="18">6:00 PM</option>
                        <option value="20">8:00 PM</option>
                        <option value="21">9:00 PM</option>
                        <option value="22" selected>10:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Cada</label>
                    <select id="intervaloPeriodico" class="form-input form-select">
                        <option value="1">1 hora</option>
                        <option value="2" selected>2 horas</option>
                        <option value="3">3 horas</option>
                        <option value="4">4 horas</option>
                        <option value="6">6 horas</option>
                    </select>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" onclick="cerrarModal()" class="btn btn-outline">Cancelar</button>
                <button type="button" onclick="guardarNotificacionPersonalizada()" class="btn btn-primary">‚úÖ Guardar</button>
            </div>
        </form>
    </div>

    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script src="assets/js/script.js" defer></script>
</body>
</html>